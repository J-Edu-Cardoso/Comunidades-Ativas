<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Comunidade Ativa</title>
    <meta name="description" content="Acesse sua conta na Comunidade Ativa">
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico">
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/enhanced.css">
    <link rel="stylesheet" href="/css/auth.css">
    
    <style>
        /* Estilos específicos para a página de login */
        .password-field {
            position: relative;
        }
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray-400);
            cursor: pointer;
            padding: 4px;
        }
    </style>
</head>
<body class="auth-layout">
    <!-- Ilustração do lado esquerdo -->
    <div class="auth-illustration">
        <div class="animate-slide-in">
            <h1 style="font-size: 2.5rem; margin-bottom: 1rem;">Bem-vindo de volta!</h1>
            <p style="font-size: 1.1rem; opacity: 0.9; max-width: 400px;">Acesse sua conta para continuar contribuindo com melhorias para nossa comunidade.</p>
            <img src="/images/auth-illustration.svg" alt="Ilustração de login" style="max-width: 100%; margin-top: 2rem;">
        </div>
    </div>

    <!-- Conteúdo do formulário -->
    <div class="auth-content">
        <div class="auth-card animate-fade-in">
            <div style="text-align: center; margin-bottom: 2rem;">
                <img src="/images/logo.svg" alt="Logo" style="height: 48px; margin-bottom: 1rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Acesse sua conta</h2>
                <p style="color: var(--gray-600);">Entre para continuar</p>
            </div>

            <!-- Notificação -->
            <div id="notification" style="display: none;" class="alert"></div>

            <!-- Formulário de Login -->
            <form id="loginForm">
                <div class="form-group">
                    <label for="email" class="form-label">E-mail</label>
                    <input 
                        type="email" 
                        id="email" 
                        class="form-control" 
                        placeholder="seu@email.com"
                        required
                    >
                </div>

                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <label for="password" class="form-label">Senha</label>
                        <a href="forgot-password.html" class="auth-link" style="font-size: 0.875rem;">
                            Esqueceu a senha?
                        </a>
                    </div>
                    <div class="password-field">
                        <input 
                            type="password" 
                            id="password" 
                            class="form-control" 
                            placeholder="••••••••"
                            required
                            minlength="6"
                        >
                        <button type="button" class="password-toggle" id="togglePassword">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div style="display: flex; align-items: center; justify-content: space-between; margin: 1.5rem 0;">
                    <div style="display: flex; align-items: center;">
                        <input type="checkbox" id="rememberMe" style="margin-right: 0.5rem;">
                        <label for="rememberMe" style="font-size: 0.875rem; color: var(--gray-600);">Lembrar de mim</label>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">
                    Entrar
                </button>

                <div style="text-align: center; margin: 1.5rem 0; position: relative;">
                    <div style="height: 1px; background: var(--gray-200); position: relative;">
                        <span style="background: white; padding: 0 1rem; position: relative; top: -0.7em; color: var(--gray-400); font-size: 0.875rem;">ou</span>
                    </div>
                </div>

                <button type="button" class="btn" style="border: 1px solid var(--gray-200); background: white; color: var(--gray-700);">
                    <img src="https://www.google.com/favicon.ico" alt="Google" style="width: 20px; height: 20px; margin-right: 8px;">
                    Continuar com Google
                </button>

                <p style="text-align: center; margin-top: 2rem; color: var(--gray-600);">
                    Não tem uma conta? <a href="register.html" class="auth-link">Cadastre-se</a>
                </p>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Toggle de visibilidade da senha
            const togglePassword = document.getElementById('togglePassword');
            const password = document.getElementById('password');
            
            if (togglePassword && password) {
                togglePassword.addEventListener('click', function() {
                    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                    password.setAttribute('type', type);
                    this.innerHTML = type === 'password' ? 
                        '<i class="far fa-eye"></i>' : 
                        '<i class="far fa-eye-slash"></i>';
                });
            }

            // Função para exibir notificação
            function showNotification(message, type = 'error') {
                const notification = document.getElementById('notification');
                if (!notification) return;
                
                notification.textContent = message;
                notification.className = 'alert';
                notification.classList.add(`alert-${type}`);
                notification.style.display = 'block';
                
                // Esconder a notificação após 5 segundos
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 5000);
            }

            // Validação do formulário
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    const rememberMe = document.getElementById('rememberMe').checked;
                    
                    try {
                        // Simulando uma requisição de autenticação
                        // Em um ambiente real, você faria uma chamada para sua API
                        // Exemplo:
                        // const response = await fetch('/api/auth/login', {
                        //     method: 'POST',
                        //     headers: {
                        //         'Content-Type': 'application/json',
                        //     },
                        //     body: JSON.stringify({ email, password })
                        // });
                        // 
                        // const data = await response.json();
                        // 
                        // if (!response.ok) {
                        //     throw new Error(data.message || 'Erro ao fazer login');
                        // }
                        
                        // Simulando um login bem-sucedido
                        console.log('Login bem-sucedido!');
                        
                        // Salvar os dados do usuário e o token no localStorage (simulado)
                        const user = {
                            id: 1,
                            name: 'Usuário Teste',
                            email: email
                        };
                        
                        // Salvar o token e o usuário separadamente
                        localStorage.setItem('token', 'token-simulado-123456');
                        localStorage.setItem('user', JSON.stringify(user));
                        
                        // Se o usuário marcou "Lembrar de mim", salvar por mais tempo
                        if (rememberMe) {
                            console.log('Lembrar de mim ativado');
                            // Aqui você pode adicionar lógica adicional para lembrar o usuário
                        }
                        
                        // Redirecionar para a página de perfil
                        window.location.href = 'Profile.html';
                        
                    } catch (error) {
                        console.error('Erro no login:', error);
                        showNotification(error.message || 'Erro ao fazer login. Tente novamente.');
                    }
                });
            }
        });
    </script>
</body>
</html>
